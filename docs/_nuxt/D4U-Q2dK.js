import{_ as d}from"./qEJNkPuv.js";import{_ as u,c as D,o as g,a as s,b as m,t as c,w as y,n as v}from"./DNkJctag.js";const _={class:"event-block-container"},w={class:"date-container"},S={class:"date-day"},f={class:"date-num"},h={class:"event-title"},x={class:"event-more-info"},k={__name:"EventBlock",props:{event:{type:Object}},setup(t){return(a,n)=>{const o=d;return g(),D("div",_,[s("div",w,[s("span",S,c(t.event.occurrenceDate.toLocaleDateString("fr-CH",{weekday:"short"})),1),s("span",f,c(t.event.occurrenceDate.toLocaleDateString("fr-CH",{day:"numeric"})),1)]),m(o,{to:`/calendrier/${t.event.slug}`,class:"event-link"},{default:y(()=>[s("div",{class:"info-container",style:v({borderBottom:`3px solid ${t.event.categoryData.color}`,borderRight:`10px solid ${t.event.categoryData.color}`}),onClick:n[0]||(n[0]=e=>console.log(t.event.slug))},[s("h3",h,c(t.event.title),1),s("div",x,[s("span",null,c(t.event.organizer)+" - "+c(t.event.dayStart.toLocaleTimeString("fr-CH",{hour:"2-digit",minute:"2-digit"}))+" - "+c(t.event.location),1)])],4)]),_:1},8,["to"])])}}},H=u(k,[["__scopeId","data-v-5b46be9a"]]),b=t=>{const a=new Date(t.startDate),n=t.endDate?new Date(t.endDate):a;return{...t,start:a,end:n,isMultiDay:a.toDateString()!==n.toDateString()}},p=t=>{const a=[],n=new Date(t.start),o=new Date(t.end);let e=new Date(n);e.setHours(0,0,0,0);const r=new Date(o);for(r.setHours(0,0,0,0);e<=r;){const i=new Date(e),l=new Date(e);l.setHours(23,59,59,999),e.toDateString()===n.toDateString()&&i.setTime(n.getTime()),e.toDateString()===o.toDateString()&&l.setTime(o.getTime()),a.push({...t,occurrenceDate:new Date(e),dayStart:i,dayEnd:l,isOccurrence:!0}),e.setDate(e.getDate()+1)}return a},C=(t,a,n=10)=>{const o=new Date;return t.map(b).filter(e=>e.end>=o).flatMap(e=>p(e).map(i=>({...i,categoryData:a[i.category]||null}))).sort((e,r)=>e.dayStart-r.dayStart).slice(0,n)};export{H as _,b as n,C as u};
