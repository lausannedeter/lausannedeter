import{_ as d}from"./DRFcc2w2.js";import{_ as D,c as u,o as m,a as s,b as g,t as c,w as y,n as _}from"./DeU8oc4n.js";const v={class:"event-block-container"},w={class:"date-container"},S={class:"date-day"},f={class:"date-num"},h={class:"event-title"},p={class:"event-more-info"},x={__name:"EventBlock",props:{event:{type:Object}},setup(t){return(n,a)=>{const o=d;return m(),u("div",v,[s("div",w,[s("span",S,c(t.event.occurrenceDate.toLocaleDateString("fr-CH",{weekday:"short"})),1),s("span",f,c(t.event.occurrenceDate.toLocaleDateString("fr-CH",{day:"numeric"})),1)]),g(o,{to:`/calendrier/${t.event.slug}`,class:"event-link"},{default:y(()=>[s("div",{class:"info-container",style:_({borderBottom:`3px solid ${t.event.categoryData.color}`,borderRight:`10px solid ${t.event.categoryData.color}`})},[s("h3",h,c(t.event.title),1),s("div",p,[s("span",null,c(t.event.organizer)+" - "+c(t.event.dayStart.toLocaleTimeString("fr-CH",{hour:"2-digit",minute:"2-digit"}))+" - "+c(t.event.location),1)])],4)]),_:1},8,["to"])])}}},b=D(x,[["__scopeId","data-v-30cd103e"]]),k=t=>{const n=new Date(t.startDate),a=t.endDate?new Date(t.endDate):n;return{...t,start:n,end:a,isMultiDay:n.toDateString()!==a.toDateString()}},B=t=>{const n=[],a=new Date(t.start),o=new Date(t.end);let e=new Date(a);e.setHours(0,0,0,0);const r=new Date(o);for(r.setHours(0,0,0,0);e<=r;){const i=new Date(e),l=new Date(e);l.setHours(23,59,59,999),e.toDateString()===a.toDateString()&&i.setTime(a.getTime()),e.toDateString()===o.toDateString()&&l.setTime(o.getTime()),n.push({...t,occurrenceDate:new Date(e),dayStart:i,dayEnd:l,isOccurrence:!0}),e.setDate(e.getDate()+1)}return n},T=(t,n,a=10)=>{const o=new Date;return t.map(k).filter(e=>e.end>=o).flatMap(e=>B(e).map(i=>({...i,categoryData:n[i.category]||null}))).sort((e,r)=>e.dayStart-r.dayStart).slice(0,a)};export{b as _,k as n,T as u};
