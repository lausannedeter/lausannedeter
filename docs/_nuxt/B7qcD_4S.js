import{_ as f,c as r,o,a as c,F as _,r as v,n as S,i as I,t as F,g as L,b as C,d as g,w as k,f as h,T as y,j as V,k as $,h as m}from"./DNkJctag.js";import{_ as Y,u as z,n as j}from"./D4U-Q2dK.js";import{u as O}from"./L4M1UQrr.js";import"./qEJNkPuv.js";const G={class:"filters-container"},H=["onClick"],P={__name:"CalendarFiltersContainer",props:{categories:{type:Array},activeFilters:{type:Array}},setup(n){return(s,t)=>(o(),r("div",G,[c("div",{class:"filter-button deselect",style:{border:"2px solid white"},onClick:t[0]||(t[0]=e=>s.$emit("toggleAllFilters"))},[...t[1]||(t[1]=[c("span",null,"Tous les filtres",-1)])]),(o(!0),r(_,null,v(n.categories,(e,a)=>(o(),r("div",{key:e.id,class:I(["filter-button",{unselected:n.activeFilters.includes(e.id)}]),style:S({backgroundColor:e.color,border:`2px solid ${e.color}`}),onClick:u=>s.$emit("toggleFilters",e.id)},[c("span",null,F(e.label),1)],14,H))),128))]))}},R=f(P,[["__scopeId","data-v-cabb35e5"]]),U={class:"calendar-month-container"},q={class:"title-container"},J={class:"month-title"},K={key:0,class:"download-link-container"},Q={class:"link-text"},W=["href"],X={key:1,class:"empty"},Z={__name:"CalendarMonthContainer",props:{monthEvents:{type:Array},monthName:{type:Date},affiche:{type:Object}},setup(n){return(s,t)=>{const e=Y;return o(),r("div",U,[c("div",q,[c("h2",J,F(n.monthName.toLocaleDateString("fr-CH",{month:"long",year:"numeric"})),1)]),n.affiche&&n.affiche.link!==""?(o(),r("div",K,[c("span",Q,[t[0]||(t[0]=g(" Télécharge ",-1)),c("a",{class:"link",href:`/affiches/${n.affiche.link}`,download:""},"l'agenda vresion pdf",8,W),t[1]||(t[1]=g(" et imprime le pour ton lieu co' ",-1))])])):L("",!0),C(y,{name:"eventsList",tag:"div"},{default:k(()=>[n.monthEvents.length?(o(),h(y,{key:0,name:"eventsList",tag:"div",class:"month-content-container"},{default:k(()=>[(o(!0),r(_,null,v(n.monthEvents,a=>(o(),h(e,{key:a.id,event:a},null,8,["event"]))),128))]),_:1})):(o(),r("p",X," Pas d’évènement pour le moment "))]),_:1})])}}},ee=f(Z,[["__scopeId","data-v-63b601d0"]]),te=(n,s)=>{const t=[],e=new Date(n);for(e.setDate(1);e<=s;)t.push(new Date(e)),e.setMonth(e.getMonth()+1);return t},ne=n=>n.reduce((s,t)=>{const e=new Date(t.monthStart),a=`${e.getFullYear()}-${e.getMonth()}`;return s[a]=t,s},{}),se=n=>n.reduce((s,t)=>{const e=t.occurrenceDate,a=`${e.getFullYear()}-${e.getMonth()}`;return s[a]||(s[a]=[]),s[a].push(t),s},{}),oe={class:"calendar-page"},ae=50,le={__name:"index",setup(n){const{categories:s,events:t,categoryMap:e,affiches:a}=O(),u=z(t,e,ae).map(j),M=u[0].occurrenceDate,x=u[u.length-1].occurrenceDate,D=te(M,x),E=ne(a),l=V(["perma"]);function b(i){l.value.includes(i)?l.value=l.value.filter(p=>p!==i):l.value.push(i)}function w(){l.value.length==0?s.forEach(i=>{l.value.push(i.id)}):l.value=[]}const B=$(()=>l.value.length===0?u:u.filter(i=>!l.value.includes(i.categoryData.id))),T=$(()=>se(B.value));return(i,p)=>{const A=R,N=ee;return o(),r("section",oe,[C(A,{categories:m(s),activeFilters:m(l),onToggleFilters:b,onToggleAllFilters:w},null,8,["categories","activeFilters"]),(o(!0),r(_,null,v(m(D),d=>(o(),h(N,{key:d.toISOString(),"month-events":m(T)[`${d.getFullYear()}-${d.getMonth()}`]||[],"month-name":d,affiche:m(E)[`${d.getFullYear()}-${d.getMonth()}`]||null},null,8,["month-events","month-name","affiche"]))),128))])}}},de=f(le,[["__scopeId","data-v-a76aa8b3"]]);export{de as default};
